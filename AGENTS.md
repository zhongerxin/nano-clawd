# Repository Guidelines

## Project Structure & Module Organization
- `src/` contains all runtime code:
  - `index.ts`: CLI entrypoint and main agent loop.
  - `auth.ts`: OAuth login and API key handling.
  - `tools.ts`: built-in tool registration plus `webfetch`.
  - `mcp.ts`: MCP stdio client and dynamic tool loading.
  - `prompt.ts`: system prompt and Skills loading.
  - `tui.ts`: terminal UI rendering and input flow.
  - `proxy.ts`: proxy initialization before network calls.
- `dist/` is TypeScript build output (generated by `tsc`).
- Root config files: `package.json`, `tsconfig.json`, `README.md`, `CLAUDE.md`.

## Build, Test, and Development Commands
- `npm install`: install dependencies.
- `npm run build`: compile TypeScript to `dist/`.
- `npm run start`: run compiled CLI (`node dist/index.js`).
- `npm run dev`: run directly with Bun (`bun run src/index.ts`).
- `npx tsc --noEmit`: strict type-check without emitting files.

## Coding Style & Naming Conventions
- Language: TypeScript (ESM, NodeNext). Keep local imports with `.js` extension.
- Formatting pattern in current source: 2-space indentation, no semicolons, trailing commas where helpful.
- Naming:
  - `camelCase` for variables/functions.
  - `PascalCase` for interfaces/types/classes.
  - kebab/lowercase filenames (e.g., `prompt.ts`, `mcp.ts`).
- Keep modules focused; avoid adding cross-cutting logic to `index.ts` beyond orchestration.

## Testing Guidelines
- No automated test framework is configured yet.
- Minimum validation for changes:
  - run `npx tsc --noEmit`
  - run `npm run build`
  - smoke-test affected flow via `npm run start` (or `npm run dev`)
- For behavior changes, document manual test steps in the PR.

## Commit & Pull Request Guidelines
- Git history is not available in this workspace snapshot (`.git` missing), so no local convention could be inferred.
- Use clear, scoped commit messages, preferably Conventional Commits, e.g. `feat(mcp): add timeout for tools/list`.
- PRs should include:
  - what changed and why
  - impacted files/modules
  - verification steps and command output summary
  - screenshots/terminal captures for TUI-visible changes

## Security & Configuration Tips
- Do not commit user secrets under `~/.nano-clawd/` (`auth.json`, `mcp.json`, skills with secrets).
- Treat MCP server definitions as trusted-code boundaries; review commands and args before enabling.
